{
  "hash": "d2d810f8ffe96404ec4e754b5644dc0c",
  "result": {
    "markdown": "---\ntitle: \"Data Wrangling\"\nauthor: \"Ehssan Roshankar\"\n---\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-1_cc35d2a4c998cdde6b498c8214078baa'}\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(data.table)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attache Paket: 'data.table'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Die folgenden Objekte sind maskiert von 'package:dplyr':\n#> \n#>     between, first, last\n```\n:::\n\n```{.r .cell-code}\nlibrary(vroom)\ncol_types <- list(\n  id = col_character(),\n  type = col_character(),\n  number = col_character(),\n  country = col_character(),\n  date = col_date(\"%Y-%m-%d\"),\n  abstract = col_character(),\n  title = col_character(),\n  kind = col_character(),\n  num_claims = col_double(),\n  filename = col_character(),\n  withdrawn = col_double()\n)\n\npatent_tbl <- vroom(\n            file       = \"C:/Users/ehsan/Desktop/DataSciece/myds/ss23-bdsb-EhssRos/03_datawrang/Patent_data_reduced/patent.tsv\", \n            delim      = \"\\t\", \n            col_types  = col_types,\n            na         = c(\"\", \"NA\", \"NULL\")\n        )\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: type,\n#> number, country, abstract, title, kind, filename, withdrawn\n```\n:::\n\n```{.r .cell-code}\nct <- list(\n  id = col_character(),\n  organization = col_character(),\n  type = col_number()\n  \n)\nct2 <- list(\n  patent_id = col_character(),\n  assignee_id = col_character()\n)\n\nassignee <- vroom(\n  file       = \"C:/Users/ehsan/Desktop/DataSciece/myds/ss23-bdsb-EhssRos/03_datawrang/Patent_data_reduced/assignee.tsv\", \n  delim      = \"\\t\", \n  col_types  = ct,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\n\n\npatent_assignee <- vroom(\n  file       = \"C:/Users/ehsan/Desktop/DataSciece/myds/ss23-bdsb-EhssRos/03_datawrang/Patent_data_reduced/patent_assignee.tsv\", \n  delim      = \"\\t\", \n  col_types  = ct2,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\nmerged_data <- left_join(patent_assignee, assignee, by = c(\"assignee_id\" = \"id\"))\nsorted_data <- merged_data %>%\n  filter(type == 2) %>% \n  group_by(organization) %>%\n  summarise(pats = n()) %>%\n  arrange(desc(pats)) \n\n\n#Question 1 answer:\n\nhead(sorted_data, 10)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"organization\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"pats\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"7547\"},{\"1\":\"Microsoft Corporation\",\"2\":\"3165\"},{\"1\":\"Google Inc.\",\"2\":\"2668\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"2597\"},{\"1\":\"Apple Inc.\",\"2\":\"2201\"},{\"1\":\"General Electric Company\",\"2\":\"1873\"},{\"1\":\"Hewlett-Packard Development Company, L.P.\",\"2\":\"1638\"},{\"1\":\"AT&T INTELLECTUAL PROPERTY I, L.P.\",\"2\":\"1625\"},{\"1\":\"Intel Corporation\",\"2\":\"1616\"},{\"1\":\"GM Global Technology Operations LLC\",\"2\":\"1533\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-2_d23c4c14bd6058648d22816e9283af66'}\n\n```{.r .cell-code}\nassignee_patent <- left_join(assignee, patent_assignee, by = c(\"id\" = \"assignee_id\"))\n\npatent_data <- left_join(assignee_patent, patent_tbl, by = c( \"patent_id\"=\"id\"))\naugust_pat <- patent_data %>%\n  filter(month(date) == 8, year(date) == 2014)\npatent_counts <- august_pat %>%\n  group_by(organization) %>%\n  summarize(num_patents = n()) %>%\n  ungroup()\ntop_orgs <- patent_counts %>%\n  arrange(desc(num_patents)) %>%\n  head(10)\ntop_orgs\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"organization\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"num_patents\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"718\"},{\"1\":\"Samsung Electronics Co., Ltd.\",\"2\":\"524\"},{\"1\":\"Canon Kabushiki Kaisha\",\"2\":\"361\"},{\"1\":\"Microsoft Corporation\",\"2\":\"337\"},{\"1\":\"Sony Corporation\",\"2\":\"269\"},{\"1\":\"Google Inc.\",\"2\":\"240\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"223\"},{\"1\":\"Apple Inc.\",\"2\":\"222\"},{\"1\":\"Kabushiki Kaisha Toshiba\",\"2\":\"213\"},{\"1\":\"LG Electronics Inc.\",\"2\":\"211\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-3_59762d95db667edbbe9aa4dc17d010b3'}\n\n```{.r .cell-code}\nct3 <- list(\n  patent_id = col_character(),\n  mainclass_id = col_character(),\n  sequence = col_double()\n)\n\nuspc <- vroom(\n  file       = \"C:/Users/ehsan/Desktop/DataSciece/myds/ss23-bdsb-EhssRos/03_datawrang/Patent_data_reduced/uspc.tsv\", \n  delim      = \"\\t\", \n  col_types  = ct3,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\n\npatent_assignee_uspc <- assignee_patent %>%\n  left_join(uspc)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Joining with `by = join_by(patent_id)`\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning in left_join(., uspc): Detected an unexpected many-to-many relationship between `x` and `y`.\n#> ℹ Row 1 of `x` matches multiple rows in `y`.\n#> ℹ Row 376875 of `y` matches multiple rows in `x`.\n#> ℹ If a many-to-many relationship is expected, set `relationship =\n#>   \"many-to-many\"` to silence this warning.\n```\n:::\n\n```{.r .cell-code}\npatents_top10 <- patent_assignee_uspc %>%\n  filter( !is.na(organization)) %>%\n  group_by(organization) %>%\n  summarise(count = n()) %>%\n  ungroup() %>%\n  arrange(desc(count)) %>%  \n  head(n = 10)\npatents_top10\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"organization\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"count\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"20680\"},{\"1\":\"Samsung Electronics Co., Ltd.\",\"2\":\"16089\"},{\"1\":\"Canon Kabushiki Kaisha\",\"2\":\"10301\"},{\"1\":\"Sony Corporation\",\"2\":\"9073\"},{\"1\":\"Microsoft Corporation\",\"2\":\"8126\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"7837\"},{\"1\":\"Kabushiki Kaisha Toshiba\",\"2\":\"7457\"},{\"1\":\"Google Inc.\",\"2\":\"6827\"},{\"1\":\"LG Electronics Inc.\",\"2\":\"6386\"},{\"1\":\"Panasonic Corporation\",\"2\":\"6124\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n#business machines\ntop5 <- patent_assignee_uspc %>%\n  filter( organization %in% patents_top10$organization,  !is.na(mainclass_id)) %>%\n  group_by(mainclass_id) %>%\n  summarise(count_class = n()) %>%\n  ungroup() %>%\n  arrange(desc(count_class)) %>%  \n  select(mainclass_id) %>%\n  head(n = 5)\ntop5\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"mainclass_id\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"257\"},{\"1\":\"455\"},{\"1\":\"370\"},{\"1\":\"348\"},{\"1\":\"709\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}